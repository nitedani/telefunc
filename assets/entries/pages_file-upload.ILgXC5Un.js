import{u as a,o,a as c}from"../chunks/chunk-ccG3OxR2.js";import{j as e}from"../chunks/chunk-DHKUWxfO.js";/* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      *//* empty css                      */const i=[{pageSectionId:"example",pageSectionLevel:2,pageSectionTitle:"Example"},{pageSectionId:"reading-strategies",pageSectionLevel:2,pageSectionTitle:"Reading strategies"},{pageSectionId:"limitations",pageSectionLevel:2,pageSectionTitle:"Limitations"},{pageSectionId:"one-shot-reads",pageSectionLevel:3,pageSectionTitle:"One-shot reads"},{pageSectionId:"read-in-order",pageSectionLevel:3,pageSectionTitle:"Read in order"},{pageSectionId:"server-integration",pageSectionLevel:2,pageSectionTitle:"Server integration"},{pageSectionId:"how-it-works",pageSectionLevel:2,pageSectionTitle:"How it works"}];function r(l){const s={a:"a",blockquote:"blockquote",br:"br",code:"code",div:"div",figure:"figure",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...a(),...l.components},{ChoiceGroup:n}=s;return n||d("ChoiceGroup"),e.jsxs(e.Fragment,{children:[e.jsxs(s.p,{children:["Telefunc supports ",e.jsx(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/File",children:e.jsx(s.code,{children:"File"})})," and ",e.jsx(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Blob",children:e.jsx(s.code,{children:"Blob"})})," arguments — you can pass them to a telefunction just like any other argument. Any signature works: single file, multiple files, ",e.jsx(s.code,{children:"File[]"})," arrays, mixed with other arguments — it's completely transparent."]}),`
`,e.jsxs(s.blockquote,{children:[`
`,e.jsxs(s.p,{children:["When a telefunction call contains files, Telefunc automatically switches from JSON to ",e.jsx(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/FormData",children:e.jsx(s.code,{children:"multipart/form-data"})}),"."]}),`
`]}),`
`,e.jsx("h2",{id:"example",children:"Example"}),`
`,e.jsxs(n,{choices:["JavaScript","TypeScript"],children:[e.jsx(s.div,{"data-choice-value":"JavaScript",className:"choice",children:e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"js","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// FileUpload.telefunc.js"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// Environment: server"})}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"import"}),e.jsx(s.span,{style:{color:"#24292E"},children:" fs "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"from"}),e.jsx(s.span,{style:{color:"#032F62"},children:" 'node:fs'"})]}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"export"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" async"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" function"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" onUpload"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#E36209"},children:"file"}),e.jsx(s.span,{style:{color:"#24292E"},children:", "}),e.jsx(s.span,{style:{color:"#E36209"},children:"description"}),e.jsx(s.span,{style:{color:"#24292E"},children:") {"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"  // Stream to disk — constant memory usage, no matter the file size"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"  const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" writable"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#24292E"},children:" fs."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"createWriteStream"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"`./uploads/${"}),e.jsx(s.span,{style:{color:"#24292E"},children:"file"}),e.jsx(s.span,{style:{color:"#032F62"},children:"."}),e.jsx(s.span,{style:{color:"#24292E"},children:"name"}),e.jsx(s.span,{style:{color:"#032F62"},children:"}`"}),e.jsx(s.span,{style:{color:"#24292E"},children:")"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"  for"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" await"}),e.jsx(s.span,{style:{color:"#24292E"},children:" ("}),e.jsx(s.span,{style:{color:"#D73A49"},children:"const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" chunk"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" of"}),e.jsx(s.span,{style:{color:"#24292E"},children:" file."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"stream"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()) {"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"    writable."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"write"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(chunk)"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"  }"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  writable."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"end"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  console."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"log"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"`Saved ${"}),e.jsx(s.span,{style:{color:"#24292E"},children:"file"}),e.jsx(s.span,{style:{color:"#032F62"},children:"."}),e.jsx(s.span,{style:{color:"#24292E"},children:"name"}),e.jsx(s.span,{style:{color:"#032F62"},children:"} (${"}),e.jsx(s.span,{style:{color:"#24292E"},children:"file"}),e.jsx(s.span,{style:{color:"#032F62"},children:"."}),e.jsx(s.span,{style:{color:"#24292E"},children:"size"}),e.jsx(s.span,{style:{color:"#032F62"},children:"} bytes): ${"}),e.jsx(s.span,{style:{color:"#24292E"},children:"description"}),e.jsx(s.span,{style:{color:"#032F62"},children:"}`"}),e.jsx(s.span,{style:{color:"#24292E"},children:")"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"}"})})]})})})}),e.jsx(s.div,{"data-choice-value":"TypeScript",className:"choice",children:e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"ts","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"ts","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// FileUpload.telefunc.ts"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// Environment: server"})}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"import"}),e.jsx(s.span,{style:{color:"#24292E"},children:" fs "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"from"}),e.jsx(s.span,{style:{color:"#032F62"},children:" 'node:fs'"})]}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"export"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" async"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" function"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" onUpload"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#E36209"},children:"file"}),e.jsx(s.span,{style:{color:"#D73A49"},children:":"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" File"}),e.jsx(s.span,{style:{color:"#24292E"},children:", "}),e.jsx(s.span,{style:{color:"#E36209"},children:"description"}),e.jsx(s.span,{style:{color:"#D73A49"},children:":"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" string"}),e.jsx(s.span,{style:{color:"#24292E"},children:") {"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"  // Stream to disk — constant memory usage, no matter the file size"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"  const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" writable"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#24292E"},children:" fs."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"createWriteStream"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"`./uploads/${"}),e.jsx(s.span,{style:{color:"#24292E"},children:"file"}),e.jsx(s.span,{style:{color:"#032F62"},children:"."}),e.jsx(s.span,{style:{color:"#24292E"},children:"name"}),e.jsx(s.span,{style:{color:"#032F62"},children:"}`"}),e.jsx(s.span,{style:{color:"#24292E"},children:")"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"  for"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" await"}),e.jsx(s.span,{style:{color:"#24292E"},children:" ("}),e.jsx(s.span,{style:{color:"#D73A49"},children:"const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" chunk"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" of"}),e.jsx(s.span,{style:{color:"#24292E"},children:" file."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"stream"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()) {"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"    writable."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"write"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(chunk)"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"  }"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  writable."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"end"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  console."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"log"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"`Saved ${"}),e.jsx(s.span,{style:{color:"#24292E"},children:"file"}),e.jsx(s.span,{style:{color:"#032F62"},children:"."}),e.jsx(s.span,{style:{color:"#24292E"},children:"name"}),e.jsx(s.span,{style:{color:"#032F62"},children:"} (${"}),e.jsx(s.span,{style:{color:"#24292E"},children:"file"}),e.jsx(s.span,{style:{color:"#032F62"},children:"."}),e.jsx(s.span,{style:{color:"#24292E"},children:"size"}),e.jsx(s.span,{style:{color:"#032F62"},children:"} bytes): ${"}),e.jsx(s.span,{style:{color:"#24292E"},children:"description"}),e.jsx(s.span,{style:{color:"#032F62"},children:"}`"}),e.jsx(s.span,{style:{color:"#24292E"},children:")"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"}"})})]})})})})]}),`
`,e.jsxs(n,{choices:["JavaScript","TypeScript"],children:[e.jsx(s.div,{"data-choice-value":"JavaScript",className:"choice",children:e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"jsx","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"jsx","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// FileUpload.jsx"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// Environment: client"})}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"import"}),e.jsx(s.span,{style:{color:"#24292E"},children:" { onUpload } "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"from"}),e.jsx(s.span,{style:{color:"#032F62"},children:" './FileUpload.telefunc'"})]}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"function"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" FileUpload"}),e.jsx(s.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"  return"}),e.jsx(s.span,{style:{color:"#24292E"},children:" ("})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"    <"}),e.jsx(s.span,{style:{color:"#22863A"},children:"form"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#6F42C1"},children:"      onSubmit"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#24292E"},children:"{"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"async"}),e.jsx(s.span,{style:{color:"#24292E"},children:" ("}),e.jsx(s.span,{style:{color:"#E36209"},children:"e"}),e.jsx(s.span,{style:{color:"#24292E"},children:") "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"=>"}),e.jsx(s.span,{style:{color:"#24292E"},children:" {"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"        e."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"preventDefault"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"        const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" form"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#D73A49"},children:" new"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" FormData"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(e.currentTarget)"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"        const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" file"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#24292E"},children:" form."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"get"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"'file'"}),e.jsx(s.span,{style:{color:"#24292E"},children:")"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"        const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" description"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#24292E"},children:" form."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"get"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"'description'"}),e.jsx(s.span,{style:{color:"#24292E"},children:")"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"        await"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" onUpload"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(file, description)"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"      }}"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"    >"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"      <"}),e.jsx(s.span,{style:{color:"#22863A"},children:"input"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" name"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"file"'}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" type"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"file"'}),e.jsx(s.span,{style:{color:"#24292E"},children:" />"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"      <"}),e.jsx(s.span,{style:{color:"#22863A"},children:"input"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" name"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"description"'}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" type"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"text"'}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" placeholder"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"Description"'}),e.jsx(s.span,{style:{color:"#24292E"},children:" />"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"      <"}),e.jsx(s.span,{style:{color:"#22863A"},children:"button"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" type"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"submit"'}),e.jsx(s.span,{style:{color:"#24292E"},children:">Upload</"}),e.jsx(s.span,{style:{color:"#22863A"},children:"button"}),e.jsx(s.span,{style:{color:"#24292E"},children:">"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"    </"}),e.jsx(s.span,{style:{color:"#22863A"},children:"form"}),e.jsx(s.span,{style:{color:"#24292E"},children:">"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"  )"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"}"})})]})})})}),e.jsx(s.div,{"data-choice-value":"TypeScript",className:"choice",children:e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"tsx","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"tsx","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// FileUpload.tsx"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// Environment: client"})}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"import"}),e.jsx(s.span,{style:{color:"#24292E"},children:" { onUpload } "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"from"}),e.jsx(s.span,{style:{color:"#032F62"},children:" './FileUpload.telefunc'"})]}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"function"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" FileUpload"}),e.jsx(s.span,{style:{color:"#24292E"},children:"() {"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"  return"}),e.jsx(s.span,{style:{color:"#24292E"},children:" ("})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"    <"}),e.jsx(s.span,{style:{color:"#22863A"},children:"form"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#6F42C1"},children:"      onSubmit"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#24292E"},children:"{"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"async"}),e.jsx(s.span,{style:{color:"#24292E"},children:" ("}),e.jsx(s.span,{style:{color:"#E36209"},children:"e"}),e.jsx(s.span,{style:{color:"#24292E"},children:") "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"=>"}),e.jsx(s.span,{style:{color:"#24292E"},children:" {"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"        e."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"preventDefault"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"        const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" form"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#D73A49"},children:" new"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" FormData"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(e.currentTarget)"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"        const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" file"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#24292E"},children:" form."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"get"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"'file'"}),e.jsx(s.span,{style:{color:"#24292E"},children:") "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"as"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" File"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"        const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" description"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#24292E"},children:" form."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"get"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"'description'"}),e.jsx(s.span,{style:{color:"#24292E"},children:") "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"as"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" string"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"        await"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" onUpload"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(file, description)"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"      }}"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"    >"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"      <"}),e.jsx(s.span,{style:{color:"#22863A"},children:"input"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" name"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"file"'}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" type"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"file"'}),e.jsx(s.span,{style:{color:"#24292E"},children:" />"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"      <"}),e.jsx(s.span,{style:{color:"#22863A"},children:"input"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" name"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"description"'}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" type"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"text"'}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" placeholder"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"Description"'}),e.jsx(s.span,{style:{color:"#24292E"},children:" />"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"      <"}),e.jsx(s.span,{style:{color:"#22863A"},children:"button"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" type"}),e.jsx(s.span,{style:{color:"#D73A49"},children:"="}),e.jsx(s.span,{style:{color:"#032F62"},children:'"submit"'}),e.jsx(s.span,{style:{color:"#24292E"},children:">Upload</"}),e.jsx(s.span,{style:{color:"#22863A"},children:"button"}),e.jsx(s.span,{style:{color:"#24292E"},children:">"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"    </"}),e.jsx(s.span,{style:{color:"#22863A"},children:"form"}),e.jsx(s.span,{style:{color:"#24292E"},children:">"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"  )"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"}"})})]})})})})]}),`
`,e.jsx("h2",{id:"reading-strategies",children:"Reading strategies"}),`
`,e.jsxs(s.p,{children:["Each file argument is a standard ",e.jsx(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/File",children:e.jsx(s.code,{children:"File"})})," / ",e.jsx(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Blob",children:e.jsx(s.code,{children:"Blob"})})," object:"]}),`
`,e.jsxs(s.table,{children:[e.jsx(s.thead,{children:e.jsxs(s.tr,{children:[e.jsx(s.th,{children:"Method"}),e.jsx(s.th,{children:"Memory usage"}),e.jsx(s.th,{children:"Use case"})]})}),e.jsxs(s.tbody,{children:[e.jsxs(s.tr,{children:[e.jsx(s.td,{children:e.jsx(s.code,{children:"file.stream()"})}),e.jsxs(s.td,{children:["Low — chunk size",e.jsx("sup",{children:"(1)"})]}),e.jsx(s.td,{children:"Pipe to disk, S3, etc."})]}),e.jsxs(s.tr,{children:[e.jsx(s.td,{children:e.jsx(s.code,{children:"file.arrayBuffer()"})}),e.jsxs(s.td,{children:["High — file size",e.jsx("sup",{children:"(2)"})]}),e.jsx(s.td,{children:"Process in memory"})]}),e.jsxs(s.tr,{children:[e.jsx(s.td,{children:e.jsx(s.code,{children:"file.text()"})}),e.jsxs(s.td,{children:["High — file size",e.jsx("sup",{children:"(2)"})]}),e.jsx(s.td,{children:"Read text content"})]})]})]}),`
`,e.jsx("div",{style:{fontSize:"0.94em",color:"#64748b"},children:e.jsxs(s.p,{children:["(1): Only a single file chunk at a time is loaded in memory. Thus, memory consumption is low and constant (the chunk size). Recommended if files are expected to be large.",e.jsx(s.br,{}),`
`,"(2): The whole file is loaded in memory. For large files (e.g. a large videos) this leads to prohibitively high memory usage."]})}),`
`,e.jsx("h2",{id:"limitations",children:"Limitations"}),`
`,e.jsx(s.p,{children:"For best performance and efficiency, nothing is buffered internally — file bytes flow directly from the HTTP stream to your code. If you don't read a file argument, the file bytes never leave the sender (the user's browser)."}),`
`,e.jsx(s.p,{children:"This zero-buffering design comes with following inherent limitations."}),`
`,e.jsx("h3",{id:"one-shot-reads",children:"One-shot reads"}),`
`,e.jsxs(s.p,{children:["Each file can only be read once — calling ",e.jsx(s.code,{children:".stream()"}),", ",e.jsx(s.code,{children:".text()"}),", or ",e.jsx(s.code,{children:".arrayBuffer()"})," a second time throws an error."]}),`
`,e.jsxs(s.blockquote,{children:[`
`,e.jsx(s.p,{children:"The HTTP stream isn't buffered and can therefore only be consumed once."}),`
`]}),`
`,e.jsx(s.p,{children:"If you need the data multiple times, buffer it into a variable first."}),`
`,e.jsx("h3",{id:"read-in-order",children:"Read in order"}),`
`,e.jsxs(s.p,{children:["When a telefunction has multiple file arguments (e.g. ",e.jsx(s.code,{children:"file1"})," and ",e.jsx(s.code,{children:"file2"}),"), they must be read in the order they appear in the function signature."]}),`
`,e.jsxs(s.blockquote,{children:[`
`,e.jsxs(s.p,{children:["Reading out of order causes ",e.jsx(s.code,{children:"file1"})," to be discarded (with a warning)."]}),`
`]}),`
`,e.jsxs(s.blockquote,{children:[`
`,e.jsxs(s.p,{children:["That's because all files share a single forward-only HTTP stream (reading ",e.jsx(s.code,{children:"file2"})," before ",e.jsx(s.code,{children:"file1"})," would require buffering ",e.jsx(s.code,{children:"file1"})," in memory)."]}),`
`]}),`
`,e.jsxs(s.p,{children:["That said, you don't need to ",e.jsx(s.code,{children:"await"})," each file before starting reading the next — you can kick off reads concurrently (e.g. ",e.jsx(s.code,{children:"Promise.all([file1.text(), file2.text()])"}),") and they will be automatically streamed in the correct order."]}),`
`,e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"js","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// ✅ Works"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"await"}),e.jsx(s.span,{style:{color:"#24292E"},children:" file1."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"await"}),e.jsx(s.span,{style:{color:"#24292E"},children:" file2."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// ❌ Doesn't work"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"await"}),e.jsx(s.span,{style:{color:"#24292E"},children:" file2."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"await"}),e.jsx(s.span,{style:{color:"#24292E"},children:" file1."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]})]})})}),`
`,e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"js","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// ✅ Works"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"file1."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"file2."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// ❌ Doesn't work"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"file2."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"file1."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]})]})})}),`
`,e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"js","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// ✅ Works"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"await"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" Promise"}),e.jsx(s.span,{style:{color:"#24292E"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"all"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(["})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  file1."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  file2."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"])"})}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// ❌ Doesn't work"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"await"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" Promise"}),e.jsx(s.span,{style:{color:"#24292E"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"all"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(["})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  file2."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  file1."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"text"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"])"})})]})})}),`
`,e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"js","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// ✅ Works"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"await"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" Promise"}),e.jsx(s.span,{style:{color:"#24292E"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"all"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(["})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  file1."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"stream"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"pipeTo"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(..)"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  file2."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"stream"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"pipeTo"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(..)"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"])"})}),`
`,e.jsx(s.span,{"data-line":"",children:" "}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#6A737D"},children:"// ❌ Doesn't work"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"await"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" Promise"}),e.jsx(s.span,{style:{color:"#24292E"},children:"."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"all"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(["})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  file2."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"stream"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"pipeTo"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(..)"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  file1."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"stream"}),e.jsx(s.span,{style:{color:"#24292E"},children:"()."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"pipeTo"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(..)"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"])"})})]})})}),`
`,e.jsx("h2",{id:"server-integration",children:"Server integration"}),`
`,e.jsxs(s.p,{children:["Pass the ",e.jsx(s.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/Request",children:e.jsx(s.code,{children:"Request"})})," object directly:"]}),`
`,e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"ts","data-theme":"github-light",children:e.jsx(s.code,{"data-language":"ts","data-theme":"github-light",style:{display:"grid"},children:e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" httpResponse"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#D73A49"},children:" await"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" telefunc"}),e.jsx(s.span,{style:{color:"#24292E"},children:"({ request })"})]})})})}),`
`,e.jsxs(s.p,{children:["Alternatively, with Express, Fastify, or any Node.js framework, you can pass the request as a ",e.jsx(s.a,{href:"https://nodejs.org/api/stream.html#readable-streams",children:e.jsx(s.code,{children:"Readable"})})," stream along with the ",e.jsx(s.code,{children:"Content-Type"})," header:"]}),`
`,e.jsxs(n,{choices:["JavaScript","TypeScript"],children:[e.jsx(s.div,{"data-choice-value":"JavaScript",className:"choice",children:e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"js","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"js","data-theme":"github-light",style:{display:"grid"},children:[e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"app."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"all"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"'/_telefunc'"}),e.jsx(s.span,{style:{color:"#24292E"},children:", "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"async"}),e.jsx(s.span,{style:{color:"#24292E"},children:" ("}),e.jsx(s.span,{style:{color:"#E36209"},children:"req"}),e.jsx(s.span,{style:{color:"#24292E"},children:", "}),e.jsx(s.span,{style:{color:"#E36209"},children:"res"}),e.jsx(s.span,{style:{color:"#24292E"},children:") "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"=>"}),e.jsx(s.span,{style:{color:"#24292E"},children:" {"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"  const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" httpResponse"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#D73A49"},children:" await"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" telefunc"}),e.jsx(s.span,{style:{color:"#24292E"},children:"({"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"    url: req.originalUrl,"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"    method: req.method,"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"    readable: req,"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"    contentType: req.headers["}),e.jsx(s.span,{style:{color:"#032F62"},children:"'content-type'"}),e.jsx(s.span,{style:{color:"#24292E"},children:"] "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"||"}),e.jsx(s.span,{style:{color:"#032F62"},children:" ''"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"  })"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  res."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"status"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(httpResponse.statusCode)."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"type"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(httpResponse.contentType)."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"send"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(httpResponse.body)"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"})"})})]})})})}),e.jsx(s.div,{"data-choice-value":"TypeScript",className:"choice",children:e.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:e.jsx(s.pre,{tabIndex:"0","data-language":"ts","data-theme":"github-light",children:e.jsxs(s.code,{"data-language":"ts","data-theme":"github-light",style:{display:"grid"},children:[e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"app."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"all"}),e.jsx(s.span,{style:{color:"#24292E"},children:"("}),e.jsx(s.span,{style:{color:"#032F62"},children:"'/_telefunc'"}),e.jsx(s.span,{style:{color:"#24292E"},children:", "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"async"}),e.jsx(s.span,{style:{color:"#24292E"},children:" ("}),e.jsx(s.span,{style:{color:"#E36209"},children:"req"}),e.jsx(s.span,{style:{color:"#24292E"},children:", "}),e.jsx(s.span,{style:{color:"#E36209"},children:"res"}),e.jsx(s.span,{style:{color:"#24292E"},children:") "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"=>"}),e.jsx(s.span,{style:{color:"#24292E"},children:" {"})]}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#D73A49"},children:"  const"}),e.jsx(s.span,{style:{color:"#005CC5"},children:" httpResponse"}),e.jsx(s.span,{style:{color:"#D73A49"},children:" ="}),e.jsx(s.span,{style:{color:"#D73A49"},children:" await"}),e.jsx(s.span,{style:{color:"#6F42C1"},children:" telefunc"}),e.jsx(s.span,{style:{color:"#24292E"},children:"({"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"    url: req.originalUrl,"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"    method: req.method,"})}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"    readable: req,"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"    contentType: req.headers["}),e.jsx(s.span,{style:{color:"#032F62"},children:"'content-type'"}),e.jsx(s.span,{style:{color:"#24292E"},children:"] "}),e.jsx(s.span,{style:{color:"#D73A49"},children:"||"}),e.jsx(s.span,{style:{color:"#032F62"},children:" ''"}),e.jsx(s.span,{style:{color:"#24292E"},children:","})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"  })"})}),`
`,e.jsxs(s.span,{"data-line":"",children:[e.jsx(s.span,{style:{color:"#24292E"},children:"  res."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"status"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(httpResponse.statusCode)."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"type"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(httpResponse.contentType)."}),e.jsx(s.span,{style:{color:"#6F42C1"},children:"send"}),e.jsx(s.span,{style:{color:"#24292E"},children:"(httpResponse.body)"})]}),`
`,e.jsx(s.span,{"data-line":"",children:e.jsx(s.span,{style:{color:"#24292E"},children:"})"})})]})})})})]}),`
`,e.jsx("h2",{id:"how-it-works",children:"How it works"}),`
`,e.jsxs(s.blockquote,{children:[`
`,e.jsx(s.p,{children:"You can skip reading this section. Read this only if you're curious."}),`
`]}),`
`,e.jsxs(s.p,{children:["Telefunc uses a custom multipart stream parser — files are ",e.jsx(s.strong,{children:"not"})," buffered into memory on the server."]}),`
`,e.jsxs(s.ol,{children:[`
`,e.jsxs(s.li,{children:["The client serializes the telefunction call into a ",e.jsx(s.code,{children:"multipart/form-data"})," request. File/Blob arguments are replaced with placeholder descriptors and sent as separate binary parts."]}),`
`,e.jsxs(s.li,{children:["On the server, Telefunc parses the metadata first, then creates lazy ",e.jsx(s.code,{children:"File"}),"/",e.jsx(s.code,{children:"Blob"})," objects that ",e.jsx(s.strong,{children:"reference the HTTP body stream"})," without reading it yet."]}),`
`,e.jsxs(s.li,{children:["When your telefunction calls ",e.jsx(s.code,{children:"file.stream()"}),", ",e.jsx(s.code,{children:"file.text()"}),", or ",e.jsx(s.code,{children:"file.arrayBuffer()"}),", the bytes are pulled directly from the HTTP stream on demand."]}),`
`]}),`
`,e.jsxs(s.p,{children:["This means ",e.jsx(s.strong,{children:"file bytes only flow through memory when you read them"})," — and if you stream to disk, memory consumption is constant regardless of file size."]})]})}function t(l={}){const{wrapper:s}={...a(),...l.components};return s?e.jsx(s,{...l,children:e.jsx(r,{...l})}):r(l)}function d(l,s){throw new Error("Expected component `"+l+"` to be defined: you likely forgot to import, pass, or provide it.")}const h=Object.freeze(Object.defineProperty({__proto__:null,default:t,pageSectionsExport:i},Symbol.toStringTag,{value:"Module"})),b={hasServerOnlyHook:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!1}},isClientRuntimeLoaded:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:!0}},onBeforeRenderEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},dataEnv:{type:"computed",definedAtData:null,valueSerialized:{type:"js-serialized",value:null}},onRenderClient:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/renderer/onRenderClient",fileExportPathToShowToUser:[]},valueSerialized:{type:"pointer-import",value:c}},onCreatePageContext:{type:"cumulative",definedAtData:[{filePathToShowToUser:"@brillout/docpress/renderer/onCreatePageContext",fileExportPathToShowToUser:[]}],valueSerialized:[{type:"pointer-import",value:o}]},Page:{type:"standard",definedAtData:{filePathToShowToUser:"/pages/file-upload/+Page.mdx",fileExportPathToShowToUser:[]},valueSerialized:{type:"plus-file",exportValues:h}},hydrationCanBeAborted:{type:"standard",definedAtData:{filePathToShowToUser:"@brillout/docpress/config",fileExportPathToShowToUser:["default","hydrationCanBeAborted"]},valueSerialized:{type:"js-serialized",value:!0}}};export{b as configValuesSerialized};
